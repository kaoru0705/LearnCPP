#include <iostream>

const int loop_count{ 5 };
const int change_count{ 5 };

class vending_machine {
public:
    vending_machine() : price{ 450, 390, 11340, 900, 150 } {};
    void stack_drink() {};

    void sale_sale_using_lambda_function_object(int payments[], int changes[]) {
        auto calcu_changes = [&changes](int payment, int price)->int {
            int change = payment - price;
            changes[0] = change / 1000;
            change %= 1000;
            changes[1] = change / 500;
            change %= 500;
            changes[2] = change / 100;
            change %= 100;
            changes[3] = change / 50;
            change %= 50;
            changes[4] = change / 10;
            return payment - price;
            };

        for (int i = 0; i < loop_count; ++i) {
            std::cout << payments[i] << "원을 내고 " << price[i] << "원 짜리 음료를 선택했습니다." << std::endl;
            std::cout << "거슬러 받을 돈은 " << calcu_changes(payments[i], price[i]) << "입니다." << std::endl;
            std::cout << "천원 짜리 " << changes[0] << "개, 오백원 짜리 " << changes[1] << "개, 백원 짜리 " << changes[2] << "개, ";
            std::cout << "오십원 짜리 " << changes[3] << "개, 십원 짜리" << changes[4] << "개로 받습니다." << std::endl;
        }
    };

private:
    int price[loop_count];
};

int main() {
    vending_machine vending_machine_object = vending_machine();
    int payments[loop_count] { 1000, 500, 15000, 1000, 200 };
    int changes[change_count] { 0, };

    std::cout << std::endl << "람다 표현식 함수 객체로 사용하기" << std::endl;
    std::cout << "--------------------------------------------------------------------" << std::endl;
    vending_machine_object.sale_sale_using_lambda_function_object(payments, changes);
    return 0;
}
